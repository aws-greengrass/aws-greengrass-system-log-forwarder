# aws-greengrass-system-log-forwarder - AWS Greengrass component for forwarding logs to CloudWatch
# Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
# SPDX-License-Identifier: Apache-2.0

ggl_init_module(cloud-logger LIBS ggl-lib ggl-constants ggipc-client ggl-json
                                  PkgConfig::libsystemd)

set(COMPONENT_NAME "aws.greengrass.SystemLogForwarder")
set(COMPONENT_VERSION "0.1.0")

set(COMPONENTS_DIR "components")
set(LOG_MANAGER_LITE_ARTIFACTS_DIR
    "${COMPONENTS_DIR}/artifacts/${COMPONENT_NAME}/${COMPONENT_VERSION}")
set(RECIPES_DIR "${COMPONENTS_DIR}/recipes")
set(RECIPE_FILE_NAME "${COMPONENT_NAME}-${COMPONENT_VERSION}.yaml")

install(TARGETS cloud-logger-bin
        DESTINATION "${LOG_MANAGER_LITE_ARTIFACTS_DIR}")

install(
  FILES recipe.yml
  DESTINATION "${RECIPES_DIR}"
  RENAME "${RECIPE_FILE_NAME}")